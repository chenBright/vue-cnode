webpackJsonp([1,2],[,,,,function(t,e,a){"use strict";var n=a(56),s=a.n(n),i=s.a.create({baseURL:"https://cnodejs.org/api/v1"});e.a=i},,function(t,e,a){a(108);var n=a(0)(null,a(90),"data-v-080344ad",null);t.exports=n.exports},,,,,,,,,,,,,,,,,,,,,,function(t,e,a){a(118);var n=a(0)(a(163),a(100),"data-v-769ccaa7",null);t.exports=n.exports},,,,,,,,,,,,,function(t,e,a){a(121);var n=a(0)(a(160),a(103),"data-v-fe689bf2",null);t.exports=n.exports},function(t,e){},function(t,e){},function(t,e){},,,function(t,e){t.exports=["刚刚","%s 秒前","%s 分钟前","%s 小时前","%s 天前","%s 周前","%s 月前","%s 年前"]},,function(t,e,a){"use strict";function n(t){if(!n.installed){var e=new t({methods:{emit:function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];this.$emit.apply(this,[t].concat(i()(a)))},on:function(t,e){this.$on(t,e)},once:function(t,e){this.$once(t,e)},off:function(t,e){this.$off(t,e)}}});Object.defineProperty(t.prototype,"$events",{get:function(){return e}})}}var s=a(154),i=a.n(s);"undefined"!=typeof window&&window.Vue&&window.Vue.use(n),e.a=n},function(t,e,a){"use strict";function n(t){return t.getBoundingClientRect().height}function s(t,e){for(var a=c.length,s=a,i=0;i<a;i+=1)if(!c[i]){s=i;break}t.setAttribute("data-scroller-index",s);var o=e.value,u=new r.a(t,{probeType:3}),p={scroller:u,enableCallback:void 0===o.enableCallback?l.enableCallback:o.enableCallback,instance:void 0===o.instance?l.instance:o.instance,scrollerHeight:n(u.scroller),wrapperHeight:n(u.wrapper)},d=e.value.method;d&&u.on("scroll",function(t){var e=p.scrollerHeight-p.wrapperHeight;p.enableCallback&&e- -t.y<=p.instance&&d(t)}),c[s]=p}function i(t){i.installed||t.directive("scroll",{inserted:function(t,e){s(t,e)},componentUpdated:function(t,e){var a=t.getAttribute("data-scroller-index"),s=c[a],i=c[a].scroller;i.refresh();var o=e.value;s.enableCallback=void 0===o.enableCallback?l.enableCallback:o.enableCallback,s.instance=void 0===o.instance?l.instance:o.instance,s.scrollerHeight=n(i.scroller),s.wrapperHeight=n(i.wrapper)},unbind:function(t){var e=t.getAttribute("data-scroller-index");c[e].scroller.destroy(),c[e]=null}})}var o=a(53),r=a.n(o),c=[],l={scroll:null,enableCallback:!0,instance:100};"undefined"!=typeof window&&window.Vue&&window.Vue.use(i),e.a=i},function(t,e,a){"use strict";var n=a(13),s=a(123),i=a(81),o=a.n(i),r=a(82),c=a.n(r),l=a(87),u=a.n(l),p=a(83),d=a.n(p),m=a(86),v=a.n(m),_=a(88),f=a.n(_),h=a(84),g=a.n(h);n.a.use(s.a),e.a=new s.a({mode:"history",base:"/vue-cnode/",routes:[{path:"/",component:o.a,meta:{appTitle:"首页"}},{path:"/vue-cnode",component:o.a,meta:{appTitle:"首页"}},{path:"/list",name:"list",component:c.a,meta:{appTitle:{all:"全部",good:"精华",ask:"问答",job:"招聘"}}},{path:"./topic/:id",name:"topic",component:u.a,meta:{appTitle:"主题"}},{path:"./user/:userName",name:"user",component:f.a,meta:{appTitle:"用户信息"}},{path:"./message",name:"message",component:g.a,meta:{appTitle:"消息",requiresAuth:!0}},{path:"./login",name:"login",component:d.a,meta:{appTitle:"登录"}},{path:"./newTopic",name:"newTopic",component:v.a,meta:{appTitle:"新增主题",requiresAuth:!0}}]})},function(t,e,a){"use strict";var n=a(13),s=a(2),i=a(155),o=a(157),r=a(159),c=a(158),l=a(156);n.a.use(s.b);var u=new s.b.Store({modules:{list:i.a,topic:o.a,userInfo:r.a,userDetail:c.a,messages:l.a}});e.a=u},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){t.exports=a.p+"static/img/loading.8e4a704.gif"},function(t,e,a){a(115);var n=a(0)(a(161),a(97),"data-v-5d4dcea8",null);t.exports=n.exports},function(t,e,a){a(107);var n=a(0)(a(162),a(89),"data-v-010f2f84",null);t.exports=n.exports},function(t,e,a){a(110);var n=a(0)(a(164),a(92),"data-v-335bd19b",null);t.exports=n.exports},function(t,e,a){a(113);var n=a(0)(a(165),a(95),"data-v-4f2618a1",null);t.exports=n.exports},function(t,e,a){a(112);var n=a(0)(a(166),a(94),"data-v-4e4667f7",null);t.exports=n.exports},function(t,e,a){a(117);var n=a(0)(a(167),a(99),"data-v-70558dee",null);t.exports=n.exports},function(t,e,a){a(109);var n=a(0)(a(168),a(91),"data-v-17ee0b0e",null);t.exports=n.exports},function(t,e,a){a(120);var n=a(0)(a(169),a(102),"data-v-ddbb2528",null);t.exports=n.exports},function(t,e,a){a(114);var n=a(0)(a(170),a(96),"data-v-537f51f0",null);t.exports=n.exports},function(t,e,a){a(111);var n=a(0)(a(171),a(93),"data-v-45bc5df6",null);t.exports=n.exports},function(t,e,a){a(119);var n=a(0)(a(172),a(101),"data-v-d4e2d458",null);t.exports=n.exports},function(t,e,a){a(116);var n=a(0)(a(173),a(98),"data-v-67be15b6",null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"el-menu",class:{"el-menu--show":t.isShow}},[a("user-info"),t._v(" "),a("nav",[a("router-link",{staticClass:"nav-link nav-link--adjust iconfont icon-all",attrs:{to:{name:"list",query:{tab:"all"}}}},[t._v("\n            全部\n        ")]),t._v(" "),a("router-link",{staticClass:"nav-link iconfont icon-good",attrs:{to:{name:"list",query:{tab:"good"}}}},[t._v("\n            精华\n        ")]),t._v(" "),a("router-link",{staticClass:"nav-link iconfont icon-share",attrs:{to:{name:"list",query:{tab:"share"}}}},[t._v("\n            分享\n        ")]),t._v(" "),a("router-link",{staticClass:"nav-link iconfont icon-questionandanswer01",attrs:{to:{name:"list",query:{tab:"ask"}}}},[t._v("\n            问答\n        ")]),t._v(" "),a("router-link",{staticClass:"nav-link nav-link--line iconfont icon-icon",attrs:{to:{name:"list",query:{tab:"job"}}}},[t._v("\n            招聘\n        ")]),t._v(" "),a("router-link",{staticClass:"nav-link iconfont icon-msg line",attrs:{to:{name:"message"}}},[t._v("\n            消息\n        ")])],1)],1)},staticRenderFns:[]}},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"el-loading"},[n("img",{attrs:{src:a(76),alt:"loading 加载动画"}})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"login"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],staticClass:"login__input",attrs:{type:"text",placeholder:"Access Token"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}}),t._v(" "),a("button",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.login},expression:"{ methods: login }",modifiers:{prevent:!0}}],staticClass:"login__button",attrs:{type:"button"}},[t._v("登录")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"reply"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],staticClass:"reply__content",attrs:{rows:"8",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:t.replyContent},on:{input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),t._v(" "),a("button",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.confirm},expression:"{ methods: confirm }",modifiers:{prevent:!0}}],staticClass:"reply__button reply__button--confirm",attrs:{type:"button"}},[t._v("确认")]),t._v(" "),a("button",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.cancel},expression:"{ methods: cancel }",modifiers:{prevent:!0}}],staticClass:"reply__button reply__button--cancel",attrs:{type:"button"}},[t._v("取消")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-topic"},[a("div",{staticClass:"line"},[t._v("选择分类：\n        "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tab,expression:"tab"}],staticClass:"add-tab",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.tab=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"share"}},[t._v("分享")]),t._v(" "),a("option",{attrs:{value:"ask"}},[t._v("问答")]),t._v(" "),a("option",{attrs:{value:"job"}},[t._v("招聘")])]),t._v(" "),a("a",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.addTopic},expression:"{ methods: addTopic }",modifiers:{prevent:!0}}],staticClass:"add-btn"},[t._v("发布")])]),t._v(" "),a("div",{staticClass:"line"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"add-title",attrs:{type:"text",placeholder:"标题，10个字以上","max-length":"100"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"add-content",attrs:{rows:"35",placeholder:"回复支持Markdown语法,请注意标记代码"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"index"},[a("img",{staticClass:"vue-logo",attrs:{src:"https://cn.vuejs.org/images/logo.png"}})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-info"},[t.user.userId?a("div",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.toUser},expression:"{ methods: toUser }",modifiers:{prevent:!0}}],staticClass:"user-info--login"},[a("img",{staticClass:"user-info__avatar",attrs:{src:t.user.userAvatar,alt:"用户头像"}}),t._v(" "),a("span",{staticClass:"user-info__name"},[t._v(t._s(t.user.userName))]),t._v(" "),a("span",{staticClass:"user-info__more iconfont icon-right"})]):a("div",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.login},expression:"{ methods: login }",modifiers:{prevent:!0}}],staticClass:"user-info--unlogin iconfont icon-denglu"},[t._v("\n        登录\n    ")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"el-nav"},[a("el-header",{attrs:{title:t.title,isShowMenu:t.isShowMenu},on:{clickMenuIcon:t.showMenu}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMenu,expression:"isShowMenu"},{name:"tap",rawName:"v-tap.prevent",value:{methods:t.hideMenu},expression:"{ methods : hideMenu }",modifiers:{prevent:!0}}],staticClass:"page-shade"}),t._v(" "),a("el-menu",{attrs:{isShow:t.isShowMenu}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"el-header",class:{"el-header--show":t.isShow}},[a("div",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.showMenu},expression:"{ methods : showMenu }",modifiers:{prevent:!0}}],staticClass:"el-header__menu-button iconfont icon-caidan"}),t._v(" "),a("h1",{staticClass:"el-header__title"},[t._v(t._s(t.title))]),t._v(" "),a("router-link",{staticClass:"el-header__add-button iconfont icon-write",attrs:{to:{name:"newTopic"}}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"scroll",rawName:"v-scroll",value:{enableCallback:!0},expression:"{\n        enableCallback: true\n    }"}],staticClass:"user"},[a("section",{directives:[{name:"show",rawName:"v-show",value:""!==t.userDetail.authorId,expression:"userDetail.authorId !== ''"}]},[a("section",{staticClass:"user__info"},[a("img",{staticClass:"user__avatar",attrs:{src:t.userDetail.authorAvatar,alt:"用户头像"}}),t._v(" "),a("p",{staticClass:"user__name"},[t._v(t._s(t.userDetail.authorName))]),t._v(" "),a("p",{staticClass:"user__score"},[t._v("积分："+t._s(t.userDetail.score))])]),t._v(" "),a("section",{staticClass:"topics"},[a("ul",{staticClass:"topics__tabs"},[a("li",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.toggleTab,type:1},expression:"{ methods: toggleTab, type: 1 }",modifiers:{prevent:!0}}],staticClass:"topics__tab topics__tab--br",class:{"topics__tab--active":1===t.tabType}},[t._v("\n                    最近回复\n                ")]),t._v(" "),a("li",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.toggleTab,type:2},expression:"{ methods: toggleTab, type: 2 }",modifiers:{prevent:!0}}],staticClass:"topics__tab",class:{"topics__tab--active":2===t.tabType}},[t._v("\n                    最新发布\n                ")])]),t._v(" "),a("ul",{staticClass:"topics__list"},t._l(t.topicsList,function(e){return a("li",{key:e.id,staticClass:"topic-item"},[a("router-link",{attrs:{to:{name:"user",params:{userName:e.authorName}},events:"'touchend'"}},[a("img",{staticClass:"topic-item__avatar",attrs:{src:e.authorAvatar,alt:"用户头像"}})]),t._v(" "),a("router-link",{staticClass:"topic-item__info",attrs:{to:{name:"topic",params:{id:e.id}},events:"'touchend'"}},[a("h2",{staticClass:"topic-item__title"},[t._v(t._s(e.title))]),t._v(" "),a("span",{staticClass:"topic-item__author"},[t._v(t._s(e.authorName))]),t._v(" "),a("timeago",{staticClass:"topic-item__time",attrs:{since:e.lastReplyTime,"max-time":31536e4,"auto-update":300}})],1)],1)})),t._v(" "),0===t.topicsList.length?a("el-no-data"):t._e()],1)]),t._v(" "),""===t.userDetail.authorId?a("el-loading"):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"scroll",rawName:"v-scroll",value:{method:t.loadList,enableCallback:t.enableLoad,instance:300},expression:"{\n        method: loadList,\n        enableCallback: enableLoad,\n        instance: 300\n    }"}],staticClass:"list"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:0!==t.listLength,expression:"listLength !== 0"}]},t._l(t.list,function(e){return a("li",{key:e.id,staticClass:"topics-item"},[a("router-link",{attrs:{to:{name:"topic",params:{id:e.id}},events:"'touchend'"}},[a("h2",{staticClass:"topics-item__title",class:["topics-item__title--"+e.tab.type],attrs:{title:e.tab.description}},[t._v("\n                    "+t._s(e.title)+"\n                ")]),t._v(" "),a("div",{staticClass:"topics-item__info"},[a("img",{staticClass:"topics-item__avatar",attrs:{src:e.authorAvatar,alt:"用户头像"}}),t._v(" "),a("div",{staticClass:"topics-item__info-wrapper"},[a("p",{staticClass:"topics-item__inline-info"},[a("span",{staticClass:"topics-item__name"},[t._v(t._s(e.authorName))]),t._v(" "),a("span",{staticClass:"topics-item__status"},[a("b",{staticClass:"topics-item__status--emphasis"},[t._v(t._s(e.replyCount))]),t._v("\n                                 / "+t._s(e.visitCount)+"\n                            ")])]),t._v(" "),a("p",{staticClass:"topics-item__inline-info"},[a("timeago",{staticClass:"topics-item__public-time",attrs:{since:e.createTime,"max-time":31536e4,"auto-update":300}}),t._v(" "),a("timeago",{staticClass:"topics-item__reply-time",attrs:{since:e.lastReplyTime,"max-time":31536e4,"auto-update":300}})],1)])])])],1)})),t._v(" "),0===t.listLength?a("el-loading"):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-no-data"},[a("span",{staticClass:"iconfont icon-nodata"}),t._v(" "),a("p",{staticClass:"el-no-data__tips"},[t._v("暂无数据！")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{directives:[{name:"scroll",rawName:"v-scroll",value:{enableCallback:!0,instance:300},expression:"{\n        enableCallback: true,\n        instance: 300\n    }"}],staticClass:"topic"},[a("section",[""!==t.topic.title?[a("h2",{staticClass:"topic__title"},[t._v(t._s(t.topic.title))]),t._v(" "),a("div",{staticClass:"topic__info"},[a("router-link",{attrs:{to:{name:"user",params:{userName:t.topic.authorName}},events:"'touchend'"}},[a("img",{staticClass:"topic__avatar",attrs:{src:t.topic.authorAvatar,alt:"用户头像"}})]),t._v(" "),a("div",{staticClass:"topic__info--col"},[a("span",{staticClass:"topic__author"},[t._v(t._s(t.topic.authorName))]),t._v(" "),a("span",{staticClass:"topic__time"},[t._v("发布于\n                        "),a("timeago",{attrs:{since:t.topic.createTime,"max-time":31536e4,"auto-update":300}})],1)]),t._v(" "),a("div",{staticClass:"topic__info--right"},[a("span",{staticClass:"topic__type",class:["topic__type--"+t.topic.tab.type]},[t._v("\n                        "+t._s(t.topic.tab.description)+"\n                    ")]),t._v(" "),a("span",{staticClass:"topic__popularity"},[t._v(t._s(t.topic.visitCount)+"浏览")])])],1),t._v(" "),a("section",{staticClass:"markdown-body topic__content",domProps:{innerHTML:t._s(t.topic.content)}}),t._v(" "),a("h3",{staticClass:"topic__reply"},[a("b",{staticClass:"topic__reply--emphasis"},[t._v(t._s(t.topic.replies.length))]),t._v(" 回复")]),t._v(" "),0!==t.topic.length?a("ul",{staticClass:"reply-list"},t._l(t.topic.replies,function(e,n){return a("li",{key:e.id,staticClass:"reply-item"},[a("div",{staticClass:"user"},[a("router-link",{attrs:{to:{name:"user",params:{userName:e.authorName}},events:"'touchend'"}},[a("img",{staticClass:"user__avatar",attrs:{src:e.authorAvatar,alt:"用户头像"}})]),t._v(" "),a("span",{staticClass:"user__info"},[a("span",[t._v(t._s(e.authorName))]),t._v(" "),a("span",{staticClass:"topic__time"},[t._v("发布于\n                                "),a("timeago",{attrs:{since:t.topic.createTime,"max-time":31536e4,"auto-update":300}})],1)]),t._v(" "),a("span",{staticClass:"user__operation"},[a("span",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.up,replyId:e.id,index:n},expression:"{ methods: up, replyId: reply.id, index }",modifiers:{prevent:!0}}],staticClass:"iconfont icon-good",class:{"icon-good--active":t.isUps(e.ups)}}),t._v("\n                                "+t._s(e.ups.length)+"\n                            "),a("span",{directives:[{name:"tap",rawName:"v-tap.prevent",value:{methods:t.showReply,id:e.id},expression:"{ methods: showReply, id: reply.id }",modifiers:{prevent:!0}}],staticClass:"iconfont icon-fenxiangbian"})])],1),t._v(" "),a("div",{staticClass:"markdown-body reply-item__content",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),e.id===t.currentId?a("el-reply",{attrs:{user:"@"+e.authorName+" ",replyId:e.id},on:{replyConfirm:t.addReply,replyCancel:t.hideReply}}):t._e()],1)})):t._e(),t._v(" "),a("el-reply",{on:{replyConfirm:t.addReply,replyCancel:t.hideReply}})]:t._e()],2),t._v(" "),""===t.topic.title?a("el-loading"):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"scroll",rawName:"v-scroll",value:{enableCallback:!0},expression:"{\n        enableCallback: true\n    }"}],staticClass:"message"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:0!==t.messages.length,expression:"messages.length !== 0"}],staticClass:"message-list"},t._l(t.messages,function(e){return a("li",{key:e.replyId,staticClass:"message-item"},[a("div",{staticClass:"message-item__info"},[a("router-link",{attrs:{to:{name:"user",params:{userName:e.authorName}},events:"'touchend'"}},[a("img",{staticClass:"message-item__avatar",attrs:{src:e.authorAvatar,alt:"用户头像"}})]),t._v(" "),a("span",{staticClass:"message-item__tips"},[a("span",[t._v(t._s(e.authorName))]),t._v(" "),"reply"===e.type?a("span",[t._v("在回复中@了您")]):a("span",[t._v("回复了您的话题")])]),t._v(" "),a("timeago",{staticClass:"message-item__time",attrs:{since:e.replyTime,"max-time":31536e4,"auto-update":300}})],1),t._v(" "),a("div",{staticClass:"markdown-body message-item__reply",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),a("router-link",{attrs:{to:{name:"topic",params:{id:e.topicId}},events:"'touchend'"}},[a("h2",{staticClass:"message-item__title"},[t._v(t._s(e.title))])])],1)})),t._v(" "),0===t.messages.length?a("el-no-data"):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-nav"),t._v(" "),a("section",{staticClass:"page"},[a("router-view")],1)],1)},staticRenderFns:[]}},,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";var n=a(4),s={share:"分享",ask:"问答",job:"招聘",good:"精华",top:"置顶"},i={state:{list:[]},mutations:{HANDLE_LIST_DATA:function(t,e){var a=e.map(function(t){return t.good?t.tab="good":t.top&&(t.tab="top"),{id:t.id,title:t.title,tab:{type:t.tab,description:s[t.tab]},authorId:t.author_id,authorName:t.author.loginname,authorAvatar:t.author.avatar_url,createTime:t.create_at,lastReplyTime:t.last_reply_at,visitCount:t.visit_count,replyCount:t.reply_count}});t.list=t.list.concat(a)},RESET_LIST_DATA:function(t){t.list=[]}},actions:{getList:function(t,e){var a=t.commit,s=e.page,i=e.tab,o=e.limit,r=void 0===o?20:o,c=e.mdrender,l=void 0===c||c;n.a.get("/topics",{params:{page:s,tab:i,limit:r,mdrender:l}}).then(function(t){var e=t.data;e.success&&a("HANDLE_LIST_DATA",e.data)})},resetList:function(t){(0,t.commit)("RESET_LIST_DATA")}}};e.a=i},function(t,e,a){"use strict";function n(t){return{authorName:t.author.loginname,authorAvatar:t.author.avatar_url,replyTime:t.reply.create_at,replyId:t.reply.id,content:t.reply.content,title:t.topic.title,topicId:t.topic.id,replyType:t.type}}var s=a(4),i={state:{messages:[]},mutations:{SET_MESSAGE:function(t,e){var a=e.hasnot_read_messages.concat(e.has_read_messages),s=a.map(n);t.messages=s},RESET_USER_DETAIL:function(t){t.messages=[]}},actions:{getMessage:function(t,e){var a=t.commit,n=e.token,i=e.mdrender,o=void 0===i||i;s.a.get("/messages",{params:{accesstoken:n,mdrender:o}}).then(function(t){var e=t.data;e.success&&a("SET_MESSAGE",e.data)})},resetUserDetail:function(t){(0,t.commit)("RESET_USER_DETAIL")}}};e.a=i},function(t,e,a){"use strict";var n=a(4),s={share:"分享",ask:"问答",job:"招聘",good:"精华",top:"置顶"},i={id:"",title:"",tab:{type:"",description:""},authorId:"",authorName:"",authorAvatar:"",createTime:"",visitCount:"",content:"",replies:[]},o={state:{topic:i},mutations:{HANDLE_TOPIC_DATA:function(t,e){e.good?e.tab="good":e.top&&(e.tab="top");var a={id:e.id,title:e.title,tab:{type:e.tab,description:s[e.tab]},authorId:e.author_id,authorName:e.author.loginname,authorAvatar:e.author.avatar_url,createTime:e.create_at,visitCount:e.visit_count,content:e.content,replies:[]},n=e.replies.map(function(t){return{authorName:t.author.loginname,authorAvatar:t.author.avatar_url,id:t.id,content:t.content,ups:t.ups}});a.replies=n,t.topic=a},RESET_TOPIC_DATA:function(t){t.topic=i},UPS:function(t,e){var a=e.action,n=e.userId,s=e.replyIndex,i=t.topic.replies[s].ups;if("up"===a)i.push(n);else{for(var o=i.length,r=o-1;r>=0&&i[r]!==n;r-=1);i=i.splice(r,1)}},REPLY:function(t,e){var a=e.replyId,n=e.content,s=t.topic;s.replies.push({authorName:s.authorName,authorAvatar:s.authorAvatar,id:a,content:n,ups:[]})}},actions:{getTopic:function(t,e){var a=t.commit,s=e.id,i=e.mdrender,o=void 0===i||i;n.a.get("/topic/"+s,{params:{mdrender:o}}).then(function(t){var e=t.data;e.success&&a("HANDLE_TOPIC_DATA",e.data)})},resetTopic:function(t){(0,t.commit)("RESET_TOPIC_DATA")},up:function(t,e){var a=t.commit,s=e.replyIndex,i=e.replyId,o=e.token,r=e.userId;n.a.post("/reply/"+i+"/ups",{accesstoken:o}).then(function(t){var e=t.data;e.success&&a("UPS",{action:e.action,userId:r,replyIndex:s})})},reply:function(t,e){var a=t.commit,s=e.topicId,i=e.token,o=e.content,r=e.replyId,c={accesstoken:i,content:o.mdContent};r&&(c.reply_id=r),n.a.post("/topic/"+s+"/replies",c).then(function(t){var e=t.data;e.success&&a("REPLY",{replyId:e.reply_id,content:o.htmlContent})})}}};e.a=o},function(t,e,a){"use strict";function n(t){return{id:t.id,authorName:t.author.loginname,authorAvatar:t.author.avatar_url,lastReplyTime:t.last_reply_at,title:t.title}}var s=a(4),i={authorName:"",authorAvatar:"",score:0,recentReplies:[],recentTopics:[]},o={state:{userDetail:i},mutations:{SET_USER_DETAIL:function(t,e){var a=e.recent_replies.map(n),s=e.recent_topics.map(n);t.userDetail={authorName:e.loginname,authorAvatar:e.avatar_url,score:e.score,recentReplies:a,recentTopics:s}},RESET_USER_DETAIL:function(t){t.userDetail=i}},actions:{getUserDetail:function(t,e){var a=t.commit,n=e.userName;s.a.get("/user/"+n).then(function(t){var e=t.data;e.success&&a("SET_USER_DETAIL",e.data)})},resetUserDetail:function(t){(0,t.commit)("RESET_USER_DETAIL")}}};e.a=o},function(t,e,a){"use strict";var n=a(153),s=a.n(n),i=a(4),o={state:{userInfo:{userName:"",userAvatar:"",userId:"",token:""}},mutations:{SET_USER_INFO:function(t,e){t.userInfo={userName:e.loginname,userAvatar:e.avatar_url,userId:e.id,token:e.token}}},actions:{login:function(t,e){var a=(t.commit,t.dispatch),n=e.token;i.a.post("/accesstoken",{accesstoken:n}).then(function(t){var e=t.data;e.success&&(e.token=n,window.sessionStorage.user=s()(e),a("setUserInfo",e))})},setUserInfo:function(t,e){(0,t.commit)("SET_USER_INFO",e)}}};e.a=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(85),s=a.n(n);e.default={name:"app",components:{"el-nav":s.a}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"el-header",props:{title:{type:String,default:"首页"},isShowMenu:{type:Boolean,default:!1}},computed:{isShow:function(){return this.isShowMenu}},methods:{showMenu:function(){this.$emit("clickMenuIcon")}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(80),s=a.n(n);e.default={name:"el-menu",components:{"user-info":s.a},props:{isShow:{type:Boolean,default:!1}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"el-no-data"}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"el-reply",props:{replyId:String,user:{type:String,default:""}},data:function(){return{replyContent:this.user}},methods:{confirm:function(){this.$emit("replyConfirm",this.replyContent,this.replyId)},cancel:function(){this.$emit("replyCancel")}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2);e.default={name:"user-info",computed:a.i(n.a)({user:function(t){return t.userInfo.userInfo}}),methods:{login:function(){this.$router.push({name:"login"})},toUser:function(){var t=this.user.userName;this.$router.push({name:"user",params:{userName:t}})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"index",mounted:function(){var t=this;setTimeout(function(){t.$router.push({name:"list",query:{tab:"all"}})},1e3)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(6),i=a.n(s);e.default={name:"list",components:{"el-loading":i.a},data:function(){return{enableLoad:!0,page:0}},computed:a.i(n.a)({list:function(t){return t.list.list},tab:function(t){return t.route.query.tab},listLength:function(){return this.list.length}}),mounted:function(){this.loadList()},methods:{loadList:function(){this.enableLoad=!1,this.page+=1,this.getTopicsList()},reloadList:function(){this.resetList(),this.page=1,this.getTopicsList()},getTopicsList:function(){this.$store.dispatch("getList",{page:this.page,tab:this.tab})},resetList:function(){this.$store.dispatch("resetList")}},watch:{listLength:function(){this.enableLoad=!0},$route:function(){this.reloadList()}},beforeRouteUpdate:function(t,e,a){this.resetList(),a()},beforeRouteLeave:function(t,e,a){this.resetList(),a()}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2);e.default={name:"login",data:function(){return{token:""}},computed:a.i(n.a)({userInfo:function(t){return t.userInfo.userInfo}}),methods:{login:function(){36!==this.token.length?alert("令牌格式错误,应为36位UUID字符串"):this.$store.dispatch("login",{token:this.token})}},watch:{userInfo:function(t){if(t.userId){var e=decodeURIComponent(this.$route.query.redirect||"/");this.$router.push({path:e})}}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(6),i=a.n(s),o=a(28),r=a.n(o);e.default={name:"message",components:{"el-loading":i.a,"el-no-data":r.a},computed:a.i(n.a)({userInfo:function(t){return t.userInfo.userInfo},messages:function(t){return t.messages.messages}}),created:function(){this.$store.dispatch("getMessage",{token:this.userInfo.token})}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(77),i=a.n(s),o=a(78),r=a.n(o);e.default={name:"el-nav",components:{"el-header":i.a,"el-menu":r.a},data:function(){return{isShowMenu:!1}},computed:a.i(n.a)({title:function(t){var e=t.route;return"list"!==e.name?e.meta.appTitle:e.meta.appTitle[e.query.tab]}}),methods:{showMenu:function(){this.isShowMenu=!0},hideMenu:function(){this.isShowMenu=!1}},watch:{$route:function(){this.isShowMenu&&this.hideMenu()}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(4);e.default={name:"newTopic",data:function(){return{title:"",tab:"share",content:""}},computed:a.i(n.a)({userInfo:function(t){return t.userInfo.userInfo}}),methods:{addTopic:function(){var t=this;return this.title.length<10?void alert("标题至少10个字"):""===this.content?void alert("内容不能为空"):void s.a.post("/topics",{accesstoken:this.userInfo.token,title:this.title,tab:this.tab,content:this.content}).then(function(e){var a=e.data;a.success?t.$router.push({name:"topic",params:{id:a.topic_id}}):alert(a.error_msg)})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(151),i=(a.n(s),a(74)),o=(a.n(i),a(106)),r=(a.n(o),a(6)),c=a.n(r),l=a(79),u=a.n(l);e.default={name:"topic",components:{"el-loading":c.a,"el-reply":u.a},data:function(){return{currentId:""}},computed:a.i(n.a)({userInfo:function(t){return t.userInfo.userInfo},topic:function(t){return t.topic.topic}}),mounted:function(){this.$store.dispatch("getTopic",{id:this.$route.params.id})},methods:{showReply:function(t){if(!this.userInfo.userId)return void this.$router.push({name:"login",params:{redirect:encodeURIComponent(this.$route.path)}});this.currentId=t.id},hideReply:function(){this.currentId=""},addReply:function(t,e){var a=this.linkUsers(t),n=i.markdown.toHTML(a);n='<div class="markdown-text">'+n+"</div>";var s={topicId:this.topic.id,token:this.userInfo.token,content:{mdContent:a,htmlContent:n}};e&&(s.replyId=e),this.$store.dispatch("reply",s),this.hideReply()},resetTopic:function(){this.$store.dispatch("resetTopic")},isUps:function(t){return t.indexOf(this.userInfo.userId)!==-1},up:function(t){var e=t.replyId,a=t.index;if(!this.userInfo.userId)return void this.$router.push({name:"login",params:{redirect:encodeURIComponent(this.$route.path)}});this.$store.dispatch("up",{replyIndex:a,replyId:e,userId:this.userInfo.userId,token:this.userInfo.token})},linkUsers:function(t){for(var e=this.fetchUsers(t),a=t,n=0,s=e.length;n<s;n+=1){var i=e[n];a=a.replace(new RegExp("@"+i+"\\b(?!\\])","g"),"[@"+i+"](/user/"+i+")")}return a},fetchUsers:function(t){if(!t)return[];var e=[/```.+?```/g,/^```[\s\S]+?^```/gm,/`[\s\S]+?`/g,/^.*/gm,/\b\S*?@[^\s]*?\..+?\b/g,/\[@.+?\\]\(\/.+?\)/g],n=t;e.forEach(function(t){n=n.replace(t,"")});var i=n.match(/@[a-z0-9\-_]+\b/gim),o=[];if(i)for(var r=0,c=i.length;r<c;r+=1){var l=i[r];l=l.slice(1),o.push(l)}return o=a.i(s.uniq)(o)}},beforeRouteLeave:function(t,e,a){this.resetTopic(),a()}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2),s=a(6),i=a.n(s),o=a(28),r=a.n(o);e.default={name:"user",components:{"el-no-data":r.a,"el-loading":i.a},data:function(){return{topicsList:[],tabType:1}},computed:a.i(n.a)({userDetail:function t(e){var t=e.userDetail.userDetail;return this.topicsList=t.recentReplies,t}}),created:function(){this.getUserDetail(this.$route.params.userName)},methods:{toggleTab:function(t){var e=t.type;this.tabType=e,this.topicsList=1===e?this.userDetail.recentReplies:this.userDetail.recentTopics},getUserDetail:function(t){this.$store.dispatch("getUserDetail",{userName:t})},resetUserDetail:function(){this.$store.dispatch("resetUserDetail")}},beforeRouteUpdate:function(t,e,a){this.getUserDetail(t.params.userName),a()},beforeRouteLeave:function(t,e,a){this.resetUserDetail(),a()}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(13),s=a(48),i=(a.n(s),a(45)),o=a.n(i),r=a(46),c=a.n(r),l=a(47),u=a.n(l),p=a(41),d=a.n(p),m=a(51),v=a(49),_=a(50),f=a(52),h=a(42),g=(a.n(h),a(44)),b=(a.n(g),a(43));a.n(b);n.a.use(o.a),n.a.use(c.a,{name:"timeago",locale:"zh-CN",locales:{"zh-CN":u.a}}),n.a.use(v.a),n.a.use(_.a),a.i(s.sync)(f.a,m.a),n.a.config.productionTip=!1;var y=window.sessionStorage.user;y&&f.a.dispatch("setUserInfo",JSON.parse(y)),m.a.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?f.a.state.userInfo.userInfo.userId?a():a({path:"/login",query:{redirect:t.fullPath}}):a()}),new n.a({el:"#app",router:m.a,store:f.a,template:"<App/>",components:{App:d.a}})}],[174]);
//# sourceMappingURL=app.2f17c417d701266ddd47.js.map